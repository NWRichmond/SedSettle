%% COMPARE DATA TO EXPECTED PHI TIMES
function new_mass_timeseries = compareExpectedMeasuredPhi(mass_timeseries, expected_kinematics)
    interval_weight = zeros(20,1);
    phi = -1;
    fprintf('%s\n', ...
            'phi      t_expected t_observed   interval_weight');
    for j=1:21%i = 1:size(expected_kinematics,1) % 1:21
        measured_mass = mass_timeseries.mass; % QQ
        measured_time = mass_timeseries.time; % T
        expected_time = expected_kinematics.phiT; % PHIT
        low = expected_time(j) - 0.03;
        for i = 1:1000 %1:size(mass_timeseries,1) % 1:1000
            if measured_time(i) >= low
                measured_time(j) = measured_time(i);
            end
            measured_time(j) = measured_time(i);
            if i == 1
                interval_weight(j) = 0;
            elseif i > 1
                interval_weight(i) = measured_mass(j) - measured_mass(j-1);
            end
            if interval_weight(i) < 0
                interval_weight = 0;
            end
        end
        fprintf('%.2f    %.2f        %.2f        %.2f\n', ...
            phi,expected_time(i),measured_time(i),interval_weight(i));
        phi = phi + 0.25;
    end
    new_mass_timeseries.time = measured_time;
    new_mass_timeseries.mass = measured_mass;
    new_mass_timeseries.interval_weight = interval_weight;
end